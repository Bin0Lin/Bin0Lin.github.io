---
layout: post
title:  "B2B订单管理系统OMS（三）：订单处理"
date:   2021-02-06
categories:
    - 业务认知
tags:
    - 订单系统
---

### 订单全部字段

**订单信息**

- 订单编号
- 订单批次编号
- 订单主状态
- 订单审核状态
- 订单回款状态
- 负责销售人员

**用户信息**

- 公司名称
- 用户姓名
- 联系方式

**收货信息**

- 收货人
- 联系方式
- 收货地址

**商品信息**

- 商品属性（自营、联营、商家经营）
- 商品名称
- 年份
- 容量
- 包装
- 供应商
- 含票状态
- 货物位置
- 背标信息
- 销售单价
- 销售单价货币
- 销售数量

**支付信息**

- 商品总金额
- 优惠金额
- 订单金额
- 运费及支付方式
- 分期支付次数
- 分期支付比例
- 首次支付金额

**时间信息**

- 创建时间
- 下单时间
- 审核时间
- 最近修改时间
- 最近回款时间
- 下次回款时间
- 关闭时间

**物流信息**

- 交付方式（货源地自提、物流点自提、送货上门）
- 运输方式（空运、海运、铁路运输）
- 目的港（香港、上海、北京、广州、天津）
- 指定物流

![image](https://github.com/Bin0Lin/Bin0Lin.github.io/blob/master/image/%E8%AE%A2%E5%8D%95%E5%A4%84%E7%90%86%E7%8A%B6%E6%80%81.png)

### 订单状态

订单的流转用订单主状态来表示，而订单主状态又分为客户端订单状态和后台端订单状态，两者有对应的映射关系。

因为B端的订单需要审核后生效，且付款是线下分多次的。所以订单的状态包含了主状态、回款状态、审核状态三个类型，并且三个状态之间有互相有影响，整体会相对复杂一些。

拿最复杂的联营海外订单来说，客户端主状态有已创建、已审核、采购中、运输中、清关中、发货中、已发货、已完成、已关闭；后台端主状态有已创建、已审核、待付汇、待提货、待出运、运输中、待清关、待入库、待发货、部分发货、已发货、已完成、已取消。

回款状态有已支付定金、待付首付款、已回首付款、待付次笔款、已回次笔款、待付尾笔款、已回尾笔款；它们互相之间的对应关系如下表所示。

由于订单的款项是分期回的，所以每一个阶段的回款都会影响订单主状态的推进。如果该笔款项没法正常收回，那么订单就会停滞。而回款单本身也是需要审核的，所以就会有三层的状态。即订单主状态受回款状态的影响，回款状态又由回款单的审核状态来决定。

对于客户端，操作对象都是客户，订单主状态对应的操作分别是：

- **已创建**：有支付定金、修改订单、取消订单三个操作选择；
- **已审核**：有上传首笔回款、修改订单、取消订单三个操作选择；
- **采购中**：有修改订单、申请退款、上传次笔回款三个操作选择。因为已经回款了，但未发货，所以不可取消订单，只能走退款申请。对于订单的修改也有限制，无法修改和订单金额相关的信息，只能修改收货信息和物流信息。
- **运输中**：有修改订单、申请退款、上传尾笔回款三个操作选择。修改订单只能修改收货信息。
- **清关中**：有修改订单、申请退款两个操作选择。修改订单只能修改收货信息。
- **发货中**：有催促发货、申请退款两个操作选择。
- **部分发货**：有催促发货、确认收货、申请退款、申请售后四个操作选择。
- **已发货**：有确认收货、申请售后两操作选择。
- **已完成**：有申请售后一个操作选择。

对于后台端，操作角色有负责销售、有订单处理人员，订单的主状态对应操作和对应角色分别是：

- **已创建**：有提交审核、修改订单、取消订单三个操作选择，操作角色都是负责销售；
- **已审核**：有上传首笔回款、修改订单、取消订单三个操作选择，操作角色都是负责销售；
- **待付汇**：有申请退款、上传次笔回款、创建采购订单（采购专员）三个操作选择，除了创建采购订单，其他操作角色都是负责销售；
- **待提货**：有申请退款、更新提货时间（采购专员）三个操作选择，除了更新提货时间，其他操作角色都是负责销售；
- **待出运**：有申请退款、更新出运信息（采购专员）三个操作选择，除了更新出运信息，其他操作角色都是负责销售；
- **运输中**：有申请退款、上传尾笔回款、更新到港日期（采购专员）三个操作选择，除了更新到港信息，其他操作角色都是负责销售；
- **待清关**：有创建清关单（清关专员）、修改订单、申请回款三个操作选择，除了创建清关单，其他操作角色都是负责销售；
- **待入库**：有创建入库单（清关专员）、修改订单、申请回款三个操作选择，除了创建清关单，其他操作角色都是负责销售；
- **发货中**：有催促发货、申请退款两个操作选择，操作角色都是负责销售。
- **部分发货**：有催促发货、申请退款、申请售后四个操作选择，操作角色都是负责销售。
- **已发货**：有申请售后一个操作选择，操作角色都是负责销售。
- **已完成**：有申请售后一个操作选择，操作角色都是负责销售。
