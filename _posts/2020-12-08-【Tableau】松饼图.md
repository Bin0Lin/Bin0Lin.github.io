---
layout: post
title:  "【Tableau】华夫饼图waffle chart"
date:   2020-12-08
categories:
    - 数据科学
tags:
    - Tableau
---

华夫饼图（Waffle Chart） 是将一个矩形等分为100份，每一份格子代表1%，相比传统的饼图，华夫饼图对百分比的显示情况更加直观。但是也有一些限制，华夫饼图强调的是一个对象的百分比值，即一个华夫饼图只能显示一个百分比。而传统饼图则可以在一个图里显示多个对象的百分比，可以进行比较，看各部分的比例大小。  

在tableau BI中，制作华夫饼图的关键核心是引入辅助数据集。辅助数据集由三列构成，行、列和值：  
- 行。1到10的整数；
- 列。1到10的整数；
- 值。1%到100%的百分比；

在引入辅助数据集后，在原数据集合辅助数据集上都创建一个相同名称的字段，用来关联两个数据集。这里就命名为“关联”。在两个数据集中创建“关联”字段，值为恒定值1。这样就相当于在原始数据集的每一行都连接一个100行3列的辅助数据集。  

接着在工作表中填入辅助数据集的行和列，绘制一个10×10的表格。至此华夫饼图的底就完成了。  

接着就是把目标百分比放上去用颜色进行标记。这一步需要创建一个字段来标识颜色，命名字段名为“颜色标记”，公式为：if（sum(原数据集.百分比值) <= sum(辅助数据集.百分比值)）。颜色标记的结果是一个布尔值，满足的则被标记颜色，不满足的则保持原来的颜色。  

至此基本工作就完成啦，剩下的就是美化工作，换个好看的图标，加个文字标注等。  

![image](https://github.com/Bin0Lin/Bin0Lin.github.io/blob/master/image/waffle%20chart.png)
